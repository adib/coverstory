#summary How to use coverstory
#labels Phase-Deploy,Featured

= Introduction =

Coverstory is a GUI tool for analyzing which lines of your code have actually been executed when you run you test your code. It requires a little set up to use effectively, you must make some target changes in your Xcode project.


= Project Settings =
http://coverstory.googlecode.com/svn/site/images/settings.png

To work with Coverstory, first you need to set up your target to work with gcov. This requires turning on "Instrument Program Flow", "Generate Test Coverage Files" and linking with the gcov library.

The [http://coverstory.googlecode.com/svn/trunk/Tools/EnableGCov.scpt EnableGCov.scpt] will do this for the current configuration of the current target of the frontmost project.

Then build and run your project and exercise the code you wish to profile.

Once you are done you should find a collection of {{{*.gcda}}} and {{{*.gcno}}} files created inside of your build directory. For a project name !TestProj and a configuration named !TestConfig and a target named !TestTarget built for i386, you will find them at:

{{{
TestProj.xcodeproj
build/TestProj.build/TestConfig/TestTarget.build/Objects-normal/i386
}}}

assuming you are using standard build settings.

You then need to open these files with !CoverStory. You can open individual files to see how the coverage or you can open the the whole build folder with !CoverStory and it will show all coverage data, merging i386 and ppc data runs.

= Export To HTML =
The "Export To HTML" option in the file menu allows you to export your CoverStory data as HTML. You can do extensive customization on the HTML we produce by replacing the default coverstory.css and coverstory.js files with your own css and js post export. Take a look at the coverstory.js file for an example of adding an element to the default HTML we spit out.

= !AppleScript =
!CoverStory now has extensive !AppleScript support. One interesting issue is due to [http://openradar.appspot.com/6808327 radar 6808327] you should always call "activate" before calling "open" or else you may run into problems with the files not completely opening before the next step in the script is performed.
{{{
tell application "CoverStory"
  activate
  set a to open "foo/bar"
  tell a
    export to html
  end
end
}}}